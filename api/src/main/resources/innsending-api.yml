openapi: 3.0.3
info:
  description: API for å støtte oppretting av søknad og opplasting av vedlegg til disse.
  version: 1.0.1
  title: Innsending-api
  contact:
    name: team-fyllut-sendinn
    url: https://nav-it.slack.com/archives/C04J0SGHQTD
  license:
    name: MIT License
    url: https://github.com/navikt/soknadsfillager/blob/main/LICENSE
tags:
  - name: ettersending
    description: API for fyllut-ettersending applikasjonen.
  - name: fyllut
    description: API for fyllut applikasjonen. Endepunkt for å opprette søknad gitt utfylt skjema, slik at søker kan bruke frontend til å legge til vedlegg og sende inn.
  - name: innsendte
    description: API for soknadsarkiverer. Endepunkt for å hente liste av allerede innsendte søknader.
  - name: sendinn-soknad
    description: API for sendinn-frontend applikasjonen for å håndtere søknader.
  - name: sendinn-vedlegg
    description: API for sendinn-frontend applikasjonen for å håndtere vedlegg.
  - name: sendinn-fil
    description: API for sendinn-frontend applikasjonen for å håndtere filer.
  - name: soknadsveiviser
    description: API for soknadsveiviser applikasjonen.
  - name: ekstern
    description: API for eksterne applikasjoner.
  - name: endtoend
    description: API for endtoend-tester.

paths:
  /fyllUt/v1/soknad/{innsendingsId}:
    get:
      summary: Hent en eksisterende søknadsutfylling
      description: Dette endepunktet kalles når vedkommende henter søknaden på oppsummeringssiden. Brukernotifikasjoner som blir opprettet når vedkommende starter søknadsutfyllingen linker til oppsummeringssiden.
      operationId: fyllUtHentSoknad

      parameters:
        - name: innsendingsId
          in: path
          description: Identifisering av søknad som skal hentes
          required: true
          schema:
            type: string
          style: simple

      responses:
        '200':
          description: Pågående søknad returneres.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SkjemaDto"
        404:
          description: Ingen søknad funnet.
      tags:
        - fyllut
    put:
      summary: Oppdater en eksisterende søknadsutfylling
      description: Dette endepunktet kalles for hvert steg i FyllUt-flyten og oppdaterer søknaden. Alle felter blir overskrevet unntatt brukerId og skjemanr. Vedleggslisten skal være tom. (Vedleggslisten og hoveddokument (PDF) vil bli lagt til i "PUT /fyllUt/v1/utfyltSoknad/{innsendingsId}").
        Status blir satt til "opprettet". Når søknaden er ferdig utfylt så blir status satt til "utfylt" i "PUT /fyllUt/v1/utfyltSoknad/{innsendingsId}".
      operationId: fyllUtOppdaterSoknad

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad
          required: true
          schema:
            type: string
          style: simple

      requestBody:
        description: Søknadsmetadata for å oppdatere søknaden. HovedokumentVariant (JSON) oppdateres underveis, mens hoveddokument (PDF) av søknaden vil bli lagt til når søknaden sendes inn (siste steg i FyllUt-flyten)
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SkjemaDto"
        required: true

      responses:
        200:
          description: Oppdatering av søknad
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SkjemaDto"
      tags:
        - fyllut

    delete:
      summary: Kall for å slette opprettet søknad gitt innsendingsId.
      description: Dersom funnet, slettes søknaden og dens vedlegg, eventuelle opplastede filer og brukernotifikasjon
      operationId: fyllUtSlettSoknad

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad
          required: true
          schema:
            type: string
          style: simple

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BodyStatusResponseDto"
      tags:
        - fyllut

  /fyllUt/v1/utfyltSoknad/{innsendingsId}:
    put:
      summary: Lagre en ferdig utfylt søknad
      description: Dette endepunktet kalles i steg i FyllUt-flyten fra oppsummeringssiden før brukeren blir videresendt til SendInn-applikasjonen. Til motsetning fra "PUT /fyllUt/v1/soknad/{innsendingsId}" så blir vedlegg og den genererte PDF'en for hoveddokumentet også sendt med fra frontend. Status blir satt til "utfylt"
      operationId: fyllUtUtfyltSoknad

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad
          required: true
          schema:
            type: string
          style: simple
        - in: header
          name: Nav-Env-Qualifier
          schema:
            $ref: "#/components/schemas/EnvQualifier"

      requestBody:
        description: Søknaddata for å oppdatere søknaden
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SkjemaDto"
        required: true

      responses:
        302:
          description: Oppdatering av ferdig utfylt søknad, med redirect til SendInn
      tags:
        - fyllut

  /fyllUt/v1/soknad:
    post:
      summary: Start en ny søknadsutfylling
      description: FyllUt tjenesten gir søker mulighet til å fylle ut en søknad. Dette endepunktet kalles når vedkommende starter søknaden og det opprettes en tom søknad i databasen. Hvis bruker allerede har en aktiv søknad på samme skjemanr vil hen få valg om å fortsette på den eller starte en ny.
                   En brukernotifikasjon som linker til oppsummeringssiden i FyllUt blir opprettet. For hvert steg i FyllUt kalles PUT endepunktet for å oppdatere søknaden underveis.
      operationId: fyllUtOpprettSoknad

      requestBody:
        description: Søknadsmetadata for å opprette søknaden.  HovedokumentVariant (JSON) oppdateres underveis, mens hoveddokument (PDF) av søknaden vil bli lagt til når søknaden sendes inn (siste steg i FyllUt-flyten).
                     Liste over eventuelle obligatoriske og valgfrie vedlegg som skal/kan legges til vil bli lagt til i søknaden etterhvert som bruker fyller ut søknaden.
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SkjemaDto"
        required: true

      parameters:
            - name: force
              in: query
              description: Hvis bruker allerede har en aktiv søknad på samme skjemanr vil hen få valg om å fortsette på den eller starte en ny.
                           Denne parameteren brukes for å indikere om en bruker ønsker å starte en ny søknad uavhengig av om det allerede er en aktiv søknad på gang.
              required: false
              schema:
                type: boolean

      responses:
        200:
          description: Returnerer en BodyStatusResponseDto med status og info. Status "soknadAlreadyExists" indikerer at en søknad for dette skjemanummeret allerede er påbegynt. Frontend vil redirecte til side for å velge mellom å fortsette påbegynt søknad eller opprette ny søknad.
          content:
            application/json:
              schema: {} # For at openapi-generator skal generere en type for responsen som støtter både SkjemaDto og BodyStatusResponseDto
        201:
          description: Søknad opprettet
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SkjemaDto"
      tags:
        - fyllut

  /fyllUt/v1/prefill-data:
      get:
        summary: Hent data som skal preutfylles i fyllut
        description: Data hentes fra eksterne kilder som kan brukes til å preutfylle verdier i fyllut
        operationId: fyllUtPrefillData

        parameters:
          - name: properties
            in: query
            description: Liste av hvilke data som skal hentes
            required: true
            schema:
              type: array
              items:
                type: string
            style: form

        responses:
          '200':
            description: Data som kan brukes til å preutfylle verdier i fyllut
            content:
              application/json:
                schema:
                  $ref: "#/components/schemas/PrefillData"
        tags:
          - fyllut

  /fyllUt/v1/aktiviteter:
      get:
        summary: Hent aktiviteter for bruker
        description: "Henter aktiviteter fra Arena for bruker. Dokumentasjon: (https://confluence.adeo.no/display/ARENA/Arena+-+Tjeneste+REST+-+Tilleggsstoenad+API)"
        operationId: fyllUtAktiviteter

        parameters:
          - name: dagligreise
            in: query
            schema:
             type: boolean
             default: false
            allowEmptyValue: true

        responses:
          '200':
            description: Liste av aktiviteter for bruker. Målgruppen er den høyeste prioriterte målgruppen som overlapper samme periode.
            content:
              application/json:
                schema:
                  type: array
                  items:
                    $ref: "./../../../../external-api/src/main/resources/arena-api.yml#/components/schemas/Aktivitet"
        tags:
          - fyllut

  /fyllut/v1/ettersending:
        post:
          summary: Kall for å opprette en ettersending
          operationId: opprettEttersending

          requestBody:
            content:
              application/json:
                schema:
                  $ref: "#/components/schemas/OpprettEttersending"
            required: true
          parameters:
          - in: header
            name: Nav-Env-Qualifier
            schema:
              $ref: "#/components/schemas/EnvQualifier"

          responses:
            201:
              description: Opprettet ettersending
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/DokumentSoknadDto"
          tags:
            - ettersending

  /fyllut/v1/lospost:
        post:
          summary: Opprett en innsending av løspost.
          operationId: opprettLospost

          requestBody:
            content:
              application/json:
                schema:
                  $ref: "#/components/schemas/OpprettLospost"
            required: true
          parameters:
          - in: header
            name: Nav-Env-Qualifier
            schema:
              $ref: "#/components/schemas/EnvQualifier"

          responses:
            201:
              description: Opprettet innsending for løspost
              headers:
                Location:
                  schema:
                    type: string
                  description: Send-inn URL for løspost-innsending
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/LospostDto"
            401:
              description: Uautorisert
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/RestErrorResponseDto"
                  example:
                    message: Autentisering feilet
                    timestamp: 2023-12-21T09:31:40.549032434
                    errorCode: errorCode.unauthorized
            500:
              description: Feil i backend
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/RestErrorResponseDto"
                  example:
                    message: Noe gikk galt, prøv igjen senere
                    timestamp: 2023-12-21T09:31:40.549032434
                    errorCode: somethingFailedTryLater
          tags:
            - lospost

  /innsendte/v1/files/{uuids}:
    get:
      summary: Finds files with given uuids.
      description: Given a list of uuids, this endpoint returns all files associated with those uuids. The files would be application, application variant and attachments.
                   If there are several files attached to a given uuid, the files are merged and returned as one file.
      operationId: hentInnsendteFiler

      parameters:
        - name: uuids
          in: path
          description: A list of uuids of files to be retrieved.
          required: true
          schema:
            type: array
            items:
              type: string
          style: simple

        - name: x-innsendingId
          in: header
          description: Tracing id that will be used in logging statements.
          example: 92ee15dd-dc49-4c95-b9b6-6224bae088a0
          required: true
          schema:
            type: string

      responses:
        '200':
          description: Successful operation.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SoknadFile"
      tags:
        - innsendte


  /frontend/v1/soknad:
    post:
      summary: Kall for å opprette en søknad basert på skjemanummer og med en eventuell liste av vedlegg.
      description: På basis av oppgitt skjemanummer og eventuelle vedlegg, blir det opprettet en søknad som inviterer søker til å laste ned skjema for utfylling og opplasting av dette og eventuelle vedlegg.
      operationId: opprettSoknad

      requestBody:
        description: Data neccessary in order to publish a new task or message user notification.
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OpprettSoknadBody"
        required: true

      responses:
        201:
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DokumentSoknadDto"
      tags:
        - soknadsveiviser


  /frontend/v1/ettersendPaSkjema:
    post:
      summary: Kall for å opprette en ettersendingssøknad basert på et skjemanummer.
      description: På basis av oppgitt skjemanummer, blir det opprettet en ettersendingssøknad som inviterer søker til å laste opp vedlegg.
      operationId: opprettEttersendingGittSkjemanr

      requestBody:
        description: Data neccessary in order to publish a new task or message user notification.
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OpprettEttersendingGittSkjemaNr"
        required: true

      responses:
        201:
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DokumentSoknadDto"
      tags:
        - soknadsveiviser


  /frontend/v1/soknad/{innsendingsId}:
    get:
      summary: Kall for å hente opprettet søknad gitt innsendingsId.
      description: Dersom funnet, returneres søknaden.
      operationId: hentSoknad

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad som skal hentes
          required: true
          schema:
            type: string
          style: simple

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DokumentSoknadDto"
      tags:
        - sendinn-soknad

    patch:
      summary: Kall for å endre visningsSteg på søknad gitt innsendingsId.
      description: Dersom endring er vellykket, returneres 204.
      operationId: endreSoknad

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad som skal oppdateres
          required: true
          schema:
            type: string
          style: simple

      requestBody:
        description: New value for visningsSteg.
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PatchSoknadDto"
        required: true

      responses:
        204:
          description: No content
      tags:
        - sendinn-soknad

    delete:
      summary: Kall for å slette opprettet søknad gitt innsendingsId.
      description: Dersom funnet, slettes søknaden.
      operationId: slettSoknad

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad
          required: true
          schema:
            type: string
          style: simple

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BodyStatusResponseDto"
      tags:
        - sendinn-soknad

  /frontend/v1/soknad/{innsendingsId}/vedlegg:
    post:
      summary: Kall for å legge til et nytt vedlegg til søknad gitt innsendingsId.
      description: Det er kun vedlegg av type Annet( vedleggsnr=N6) som søker kan legge til søknaden. Hvis vellykket vedlegget med id returneres.
      operationId: lagreVedlegg

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad som skal hentes
          required: true
          schema:
            type: string
          style: simple

      requestBody:
        required: false
        description: Data som skal endres
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PostVedleggDto"


      responses:
        201:
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VedleggDto"
      tags:
        - sendinn-vedlegg

    get:
      summary: Kall for å hente vedlegg (inkludert hoveddokument) til søknad gitt innsendingsId.
      description: Dersom funnet, returneres liste av søknadens vedlegg.
      operationId: hentVedleggsListe

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad som skal hentes
          required: true
          schema:
            type: string
          style: simple

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/VedleggDto"
      tags:
        - sendinn-vedlegg

  /frontend/v1/soknad/{innsendingsId}/vedlegg/{vedleggsId}:
    get:
      summary: Kall for å hente ett spesifikt vedlegg med dens  til søknad gitt innsendingsId.
      description: Dersom funnet, returneres spesifisert vedlegg.
      operationId: hentVedlegg

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad som skal hentes
          required: true
          schema:
            type: string
          style: simple
        - name: vedleggsId
          in: path
          description: identifisering av vedlegg som skal hentes
          required: true
          schema:
            type: integer
            format: int64
          style: simple

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VedleggDto"
      tags:
        - sendinn-vedlegg

    patch:
      summary: Kall for å endre tittel og status på et vedlegg.
      description: Kall for å endre tittel og status på et vedlegg. Merk at tittel kun kan endres på vedlegg av type Annet (vedleggsid=N6).
      operationId: endreVedlegg

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad hvis vedlegg skal endres
          required: true
          schema:
            type: string
          style: simple
        - name: vedleggsId
          in: path
          description: identifisering av vedlegg som skal endres
          required: true
          schema:
            type: integer
            format: int64
          style: simple

      requestBody:
        required: true
        description: Data som skal endres
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PatchVedleggDto"

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VedleggDto"

      tags:
        - sendinn-vedlegg

    delete:
      summary: Kall for å slette ett spesifikt vedlegg med dens filer til søknad gitt innsendingsId.
      description: Dersom funnet og vedleggstypen=N6 slettes vedlegget.
      operationId: slettVedlegg

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad
          required: true
          schema:
            type: string
          style: simple
        - name: vedleggsId
          in: path
          description: identifisering av vedlegg
          required: true
          schema:
            type: integer
            format: int64
          style: simple

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BodyStatusResponseDto"
      tags:
        - sendinn-vedlegg

  /frontend/v1/soknad/{innsendingsId}/vedlegg/{vedleggsId}/fil:
    post:
      summary: Kall for å legge til en fil på ett spesifikt vedlegg til en søknad gitt innsendingsId og vedleggsId.
      description: Dersom funnet, returneres id til filen som er lagret.
      operationId: lagreFil

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad som skal hentes
          required: true
          schema:
            type: string
          style: simple
        - name: vedleggsId
          in: path
          description: identifisering av vedlegg som skal hentes
          required: true
          schema:
            type: integer
            format: int64
          style: simple

      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
              properties:
                file:
                  type: string
                  format: binary

      responses:
        201:
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FilDto"
      tags:
        - sendinn-fil

    get:
      summary: Kall for å hente en opplastede filer på ett vedlegg til en søknad gitt innsendingsId, vedleggsId og filId.
      description: Dersom funnet, returneres liste med informasjon om opplastede filer, hvis ingen filer lastet opp returneres en tom liste.
      operationId: hentFilInfoForVedlegg

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad
          required: true
          schema:
            type: string
          style: simple
        - name: vedleggsId
          in: path
          description: identifisering av vedlegg
          required: true
          schema:
            type: integer
            format: int64
          style: simple

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/FilDto"
      tags:
        - sendinn-fil


  /frontend/v1/soknad/{innsendingsId}/vedlegg/{vedleggsId}/fil/{filId}:
    get:
      summary: Kall for å hente en opplastet fil på ett spesifikt vedlegg til en søknad gitt innsendingsId, vedleggsId og filId.
      description: Dersom funnet, returneres den lagrede file.
      operationId: hentFil

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad
          required: true
          schema:
            type: string
          style: simple
        - name: vedleggsId
          in: path
          description: identifisering av vedlegg
          required: true
          schema:
            type: integer
            format: int64
          style: simple
        - name: filId
          in: path
          description: identifisering av fil som skal hentes
          required: true
          schema:
            type: integer
            format: int64
          style: simple

      responses:
        200:
          description: Successful operation
          content:
            application/pdf:
              schema:
                type: string
                format: binary
      tags:
        - sendinn-fil

    delete:
      summary: Kall for å slette en opplastet fil på en søknad gitt innsendingsId, vedleggsId og filId.
      description: Dersom funnet, slettes filen.
      operationId: slettFil

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad
          required: true
          schema:
            type: string
          style: simple
        - name: vedleggsId
          in: path
          description: identifisering av vedlegg
          required: true
          schema:
            type: integer
            format: int64
          style: simple
        - name: filId
          in: path
          description: identifisering av fil som skal hentes
          required: true
          schema:
            type: integer
            format: int64
          style: simple

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VedleggDto"
      tags:
        - sendinn-fil

  /frontend/v1/sendInn/{innsendingsId}:
    post:
      summary: Kall for å sende inn en søknad.
      description: Dersom funnet, sendes metadat om søknaden og opplastede filer inn til NAV.
      operationId: sendInnSoknad

      parameters:
        - name: innsendingsId
          in: path
          description: identifisering av søknad
          required: true
          schema:
            type: string
          style: simple

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/KvitteringsDto"
      tags:
        - sendinn-soknad

  /frontend/v1/skjema/{skjemanr}/soknader:
    get:
      summary: Kall for å hente opprettede søknader for bruker gitt skjemanummer
      description: Kan filtrere på 'soknad' | 'ettersendelse'
      operationId: hentSoknaderForSkjemanr

      parameters:
        - name: skjemanr
          in: path
          description: Skjemaet som søknaden er basert på
          required: true
          schema:
            type: string
          style: simple
        - name: soknadstyper
          in: query
          description: "Komma-separert liste som filtrerer hvilke type søknader som skal returnes. Feks: 'soknad,ettersendelse'"
          schema:
            type: array
            items:
              $ref: "#/components/schemas/SoknadType"

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/DokumentSoknadDto"
      tags:
        - fyllut

  /ekstern/v1/ettersending:
        post:
          summary: Kall for å opprette en ettersending fra eksterne applikasjoner. Skjemanr, tema og vedleggskoder valideres mot kodeverket (se https://kodeverk-web.dev.intern.nav.no/).
                   Skjemanr og vedleggskoder er valgfrie og vil bli hentet fra kodeverket hvis de ikke er oppgitt. Merk at kodeverket ikke alltid har oversettelser for alle språk og vil bruke norsk som fallback.
          operationId: eksternOpprettEttersending
          parameters:
            - name: Nav-Call-Id
              in: header
              description: En ID som identifiserer kallkjeden som dette kallet er en del av
              required: false
              schema:
                type: string
          requestBody:
            content:
              application/json:
                schema:
                  $ref: "#/components/schemas/EksternOpprettEttersending"
            required: true

          responses:
            201:
              description: Opprettet ettersending
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/DokumentSoknadDto"
            401:
              description: Uautorisert
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/RestErrorResponseDto"
                  example:
                    message: Autentisering feilet
                    timestamp: 2023-12-21T09:31:40.549032434
                    errorCode: errorCode.unauthorized
            500:
              description: Feil i backend
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/RestErrorResponseDto"
                  example:
                    message: Noe gikk galt, prøv igjen senere
                    timestamp: 2023-12-21T09:31:40.549032434
                    errorCode: somethingFailedTryLater
          tags:
            - ekstern


  /ekstern/v1/ettersending/{innsendingsId}:
        delete:
            summary: Kall for å slette opprettet ettersending gitt innsendingsId.
            description: Dersom funnet, slettes søknaden.
            operationId: eksternSlettEttersending

            parameters:
              - name: innsendingsId
                in: path
                description: identifisering av søknad
                required: true
                schema:
                  type: string
                style: simple
              - name: Nav-Call-Id
                in: header
                description: En ID som identifiserer kallkjeden som dette kallet er en del av.
                required: false
                schema:
                  type: string

            responses:
              200:
                description: Slettet ettersending
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/BodyStatusResponseDto"
              401:
                description: Uautorisert
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/RestErrorResponseDto"
                    example:
                      message: Autentisering feilet
                      timestamp: 2023-12-21T09:31:40.549032434
                      errorCode: errorCode.unauthorized
              404:
                description: Ingen ettersending funnet
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/RestErrorResponseDto"
                    example:
                      message: Ingen ettersending funnet
                      timestamp: 2023-12-21T09:31:40.549032434
                      errorCode: errorCode.resourceNotFound
              500:
                description: Feil i backend
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/RestErrorResponseDto"
                    example:
                      message: Noe gikk galt, prøv igjen senere
                      timestamp: 2023-12-21T09:31:40.549032434
                      errorCode: somethingFailedTryLater
            tags:
              - ekstern

  /ekstern/v1/skjema/{skjemanr}/soknader:
    get:
      summary: Kall for å hente opprettede søknader for bruker gitt skjemanummer fra eksterne applikasjoner
      description: Kan filtrere på 'soknad' | 'ettersendelse'
      operationId: eksternHentSoknaderForSkjemanr

      parameters:
        - name: skjemanr
          in: path
          description: Skjemaet som søknaden er basert på
          required: true
          schema:
            type: string
          style: simple
          example: "NAV 55-00.60"
        - name: soknadstyper
          in: query
          description: "Komma-separert liste som filtrerer hvilke type søknader som skal returnes. Feks: 'soknad,ettersendelse'"
          schema:
            type: array
            items:
              $ref: "#/components/schemas/SoknadType"

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/DokumentSoknadDto"
      tags:
        - ekstern


  /ekstern/v1/oppgave/ettersending:
        post:
          summary: Kall fra saksbehandler for å opprette en oppgave til en søker for ettersending av dokumentasjon. Skjemanr, tema og vedleggskoder valideres mot kodeverket (se https://kodeverk-web.dev.intern.nav.no/).
                   Skjemanr og vedleggskoder er valgfrie og vil bli hentet fra kodeverket hvis de ikke er oppgitt. Merk at kodeverket ikke alltid har oversettelser for alle språk og vil bruke norsk som fallback.
          operationId: EksternEttersendingsOppgave
          parameters:
            - name: Nav-Call-Id
              in: header
              description: En ID som identifiserer kallkjeden som dette kallet er en del av
              required: false
              schema:
                type: string
          requestBody:
            content:
              application/json:
                schema:
                  $ref: "#/components/schemas/EksternEttersendingsOppgave"
            required: true

          responses:
            201:
              description: Opprettet ettersendings oppgave
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/DokumentSoknadDto"
            401:
              description: Uautorisert
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/RestErrorResponseDto"
                  example:
                    message: Autentisering feilet
                    timestamp: 2023-12-21T09:31:40.549032434
                    errorCode: errorCode.unauthorized
            500:
              description: Feil i backend
              content:
                application/json:
                  schema:
                    $ref: "#/components/schemas/RestErrorResponseDto"
                  example:
                    message: Noe gikk galt, prøv igjen senere
                    timestamp: 2023-12-21T09:31:40.549032434
                    errorCode: somethingFailedTryLater
          tags:
            - eksternoppgave


  /ekstern/v1/oppgave/{innsendingsId}:
        delete:
            summary: Kall for å slette opprettet søknad eller ettersending gitt innsendingsId.
            description: Dersom funnet, slettes søknaden/ettersendingen.
            operationId: eksternOppgaveSlett

            parameters:
              - name: innsendingsId
                in: path
                description: identifisering av søknad/ettersending
                required: true
                schema:
                  type: string
                style: simple
              - name: Nav-Call-Id
                in: header
                description: En ID som identifiserer kallkjeden som dette kallet er en del av.
                required: false
                schema:
                  type: string

            responses:
              200:
                description: Slettet søknad/ettersending
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/BodyStatusResponseDto"
              401:
                description: Uautorisert
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/RestErrorResponseDto"
                    example:
                      message: Autentisering feilet
                      timestamp: 2023-12-21T09:31:40.549032434
                      errorCode: errorCode.unauthorized
              404:
                description: Ingen ettersending funnet
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/RestErrorResponseDto"
                    example:
                      message: Ingen ettersending funnet
                      timestamp: 2023-12-21T09:31:40.549032434
                      errorCode: errorCode.resourceNotFound
              500:
                description: Feil i backend
                content:
                  application/json:
                    schema:
                      $ref: "#/components/schemas/RestErrorResponseDto"
                    example:
                      message: Noe gikk galt, prøv igjen senere
                      timestamp: 2023-12-21T09:31:40.549032434
                      errorCode: somethingFailedTryLater
            tags:
              - eksternoppgave

  /ekstern/v1/oppgave/skjema/{skjemanr}:
    get:
      summary: Kall for å hente opprettede søknader/ettersendinger for bruker gitt skjemanummer fra eksterne applikasjoner
      description: Kan filtrere på 'soknad' | 'ettersendelse'
      operationId: oppgaveHentSoknaderForSkjemanr

      parameters:
        - name: skjemanr
          in: path
          description: Skjemaet som søknaden er basert på
          required: true
          schema:
            type: string
          style: simple
          example: "NAV 55-00.60"
        - name: soknadstyper
          in: query
          description: "Komma-separert liste som filtrerer hvilke type søknader som skal returnes. Feks: 'soknad,ettersendelse'"
          schema:
            type: array
            items:
              $ref: "#/components/schemas/SoknadType"
        - name: Nav-Call-Id
          in: header
          description: En ID som identifiserer kallkjeden som dette kallet er en del av.
          required: false
          schema:
            type: string

      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BrukerId"
        required: true

      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/DokumentSoknadDto"
      tags:
        - eksternoppgave


  /endtoend/v1/soknad/{innsendingsId}/arkiveringsstatus:
    get:
      summary: Henter arkiveringsstatus for en søknad
      description: Returnerer arkiveringsstatus
      operationId: getArkiveringsstatus

      parameters:
        - name: innsendingsId
          in: path
          description: Identifisering av søknad som skal hentes
          required: true
          schema:
            type: string
          style: simple

      responses:
        200:
          description: Returnerer arkiveringsstatus
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ArkiveringsStatusDto"
        404:
          description: Søknad ikke funnet
      tags:
        - endtoend

  /health/ping:
    get:
      summary: Pings the application to see if it responds
      description: Pings the application to see if it responds
      operationId: ping

      security: [ ]   # No security
      responses:
        '200':
          description: Successful operation; application is responding
          content:
            text/plain:
              schema:
                type: string

      tags:
        - health

  /health/isAlive:
    get:
      summary: Checks if the application and its dependencies up
      description: Checks if the application and its dependencies are up and running.
      operationId: isAlive

      security: [ ]   # No security
      responses:
        '200':
          description: Successful operation; application is alive
          content:
            text/plain:
              schema:
                type: string
        '500':
          description: The application or one of its dependencies are not up and running.
      tags:
        - health

  /health/isReady:
    get:
      summary: Checks if the application is ready to accept traffic
      description: Checks if the application is ready to accept traffic.
      operationId: isReady

      security: [ ]   # No security
      responses:
        '200':
          description: Successful operation; application is ready
          content:
            text/plain:
              schema:
                type: string

        '503':
          description: The application or one of its dependencies are not ready
      tags:
        - health

  /health/status:
    get:
      summary: Returns status of the application
      description: Returns status of the application
      operationId: getStatus

      security: [ ]   # No security
      responses:
        '200':
          description: Successful operation; application is responding
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApplicationStatus"
      tags:
        - health

  /health/backends:
    get:
      summary: Returns status of the application's backend dependencies
      description: Checks the application's backend dependencies and returns the most critical status
      operationId: getBackends

      security: [ ]   # No security
      responses:
        '200':
          description: Successful operation; application is responding
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApplicationStatus"
      tags:
        - health


components:
  schemas:
    Adresser:
      type: object
      description: Søkerens adresse
      properties:
        bostedsadresse:
          description: Bostedsadresse - Adressen hvor en person er registrert som bosatt i henhold til landets lovverk. Kan kun være en adresse til enhver tid, enten i Norge eller utlandet.
          $ref: "#/components/schemas/Adresse"
        oppholdsadresser:
          type: array
          description: Liste av oppholdsadresser - Adresse hvor en person oppholder seg, men hvor det ikke er bekreftet at personen er bosatt. Kan være både norsk og utlandsk adresse.
          items:
              $ref: "#/components/schemas/Adresse"
        kontaktadresser:
          type: array
          description: Liste av kontaktadresser - Adresse som kan benyttes for å kontakte personen per post. Det er ikke bekreftet om personen er bosatt eller oppholder seg der. Det er ikke krav til dokumentasjon for å registrere denne type adresse i PDL.
          items:
              $ref: "#/components/schemas/Adresse"

    Adresse:
      type: object
      description: Adresse
      properties:
        gyldigFraOgMed:
          type: string
          format: date
          description: Gyldig fra og med dato
          example: "2020-01-01"
        gyldigTilOgMed:
          type: string
          format: date
          description: Gyldig fra og med dato
          example: "2030-01-01"
        co:
          type: string
          description: C/O-adresse
          example: "c/o Ola Nordmann"
        adresse:
          type: string
          description: Gatenavn og husnummer o.l.
          example: "Klostergata 57A"
        bygning:
          type: string
          description: Informasjon som navn på bygg, etasje i et bygg, leilighetsnummer o.l. (utenlandske adresser har dette feltet i PDL)
        postboks:
          type: string
          description: Postboksnummer og postboksanlegg
          example: "P.O.Box 1234 Place"
        postnummer:
          type: string
          description: Postnummer
          example: "SE-12345"
        bySted:
          type: string
          description: Inneholder poststed for norske adresser, ellers by/bydel/bysted (utenlandske adresser har dette feltet i PDL)
          example: "Roma"
        region:
          type: string
          description: Navn på et område innenfor et land, kan være landsby, stat eller noe i mellom (utenlandske adresser har dette feltet i PDL)
          example: "Yorkshire"
        landkode:
          type: string
          description: Alpha-3 landekode
          example: "SWE"

    AktivSakDto:
      type: object
      description: Data om en allerede innsendt søknad
      required:
        - skjemanr
        - tittel
        - tema
        - innsendtDato
        - ettersending
        - innsendtVedleggDtos
      properties:
        innsendingsId:
          $ref: "#/components/schemas/InnsendingsId"
        skjemanr:
          $ref: "#/components/schemas/Skjemanr"
        tittel:
          $ref: "#/components/schemas/Tittel"
        tema:
          $ref: "#/components/schemas/Tema"
        innsendtDato:
          $ref: "#/components/schemas/InnsendtDato"
        ettersending:
          $ref: "#/components/schemas/Ettersending"
        innsendtVedleggDtos:
          type: array
          description: Liste av innsendte dokumenter til søknaden.
          items:
            $ref: "#/components/schemas/InnsendtVedleggDto"

    ApplicationStatus:
      type: object
      description: Applikasjonsnavn og liste med konnektivitets status mot applikasjonens backend avhengigheter.
      required:
        - status

      properties:
        status:
          $ref: "#/components/schemas/ApplicationStatusType"
        description:
          type: string
          description: Beskrivelse av feilsituasjon
          example: "Databasen i innsending-api er nede"
        logLink:
          type: string
          description: Link til Kibana logs for mer info om feilen
          example: https://logs.adeo.no/app/discover#/view/170a6860-df4c-11ed-8b42-0b0644af4500

    ApplicationStatusType:
          type: string
          enum: [ "OK", "ISSUE", "DOWN" ]
          x-enum-varnames: [ "OK", "ISSUE", "DOWN" ]
          description: Operativ status på applikasjonen. (OK=Tjeneste er tilgjengelig og fungerer normalt, ISSUE=Tjeneste er tilgjengelig, men med begrenset funksjonalitet/kapasitet, DOWN=Tjeneste er utilgjengelig)
          example: OK

    Applikasjon:
      type: string
      description: Applikasjon som har opprettet søknaden
      example: "fyllut"

    ArkiveringsStatusDto:
      type: string
      enum: [ "IkkeSatt", "Arkivert", "ArkiveringFeilet" ]
      description: Status for om innsendt søknad er blitt arkivert. Ikke innsendte søknader skal ha arkiveringsStatus IkkeSatt.
      example: Arkivert

    Beskrivelse:
      type: string
      description: Utdypende forklaring til et vedlegg.
      example: Dette er opplysninger som er nødvendig for beregning av utbetaling av foreldrepenger eller svangerskapspenger.

    BodyStatusResponseDto:
      type: object
      description: Status respons

      required:
        - status
        - info

      properties:
        status:
          type: string
        info:
          type: string

    BrukerId:
      type: string
      description: Ident til søker som har opprettet søknad i fyllUt tjenesten.
      example: 12128012345

    BrukernotifikasjonsType:
      type: string
      enum: [utkast, oppgave]
      example: oppgave

    Document:
      type: string
      format: byte
      nullable: true
      description: Dokument innhold som en Byte array
      example: Byte array med fil innhold

    LospostDto:
      type: object
      description: Data om en opprettet innsending av løspost.
      required:
        - brukerId
        - tittel
        - tema
        - status
        - opprettetDato

      properties:
        id:
          type: integer
          format: int64
          description: Identifikasjon av mellomlagret søknad
          example: 123456
        innsendingsId:
          $ref: "#/components/schemas/InnsendingsId"
        brukerId:
          $ref: "#/components/schemas/BrukerId"
        tittel:
          $ref: "#/components/schemas/Tittel"
        tema:
          $ref: "#/components/schemas/Tema"
        spraak:
          $ref: "#/components/schemas/Spraak"
        endretDato:
          $ref: "#/components/schemas/EndretDato"
        opprettetDato:
          type: string
          format: date-time
          description: Opprettet dato og tid som UTC
          example: 2021-12-03T14:10:00Z
        innsendtDato:
          type: string
          format: date-time
          description: Opprettet dato og tid som UTC
          example: 2021-12-03T14:10:00Z
        vedleggsListe:
          type: array
          description: Liste av dokumenter (hoveddokument og vedlegg) til søknad
          items:
            $ref: "#/components/schemas/VedleggDto"
        arkiveringsStatus:
          $ref: "#/components/schemas/ArkiveringsStatusDto"

    DokumentSoknadDto:
      type: object
      description: Data om en opprettet søknad.
      required:
        - brukerId
        - skjemanr
        - tittel
        - tema
        - status
        - opprettetDato
        - vedleggsListe

      properties:
        id:
          type: integer
          format: int64
          description: Identifikasjon av mellomlagret søknad
          example: 123456
        innsendingsId:
          $ref: "#/components/schemas/InnsendingsId"
        ettersendingsId:
          $ref: "#/components/schemas/InnsendingsId"
        brukerId:
          $ref: "#/components/schemas/BrukerId"
        skjemanr:
          $ref: "#/components/schemas/Skjemanr"
        tittel:
          $ref: "#/components/schemas/Tittel"
        tema:
          $ref: "#/components/schemas/Tema"
        spraak:
          $ref: "#/components/schemas/Spraak"
        status:
          $ref: "#/components/schemas/SoknadsStatusDto"
        endretDato:
          $ref: "#/components/schemas/EndretDato"
        opprettetDato:
          type: string
          format: date-time
          description: Opprettet dato og tid som UTC
          example: 2021-12-03T14:10:00Z
        innsendtDato:
          type: string
          format: date-time
          description: Opprettet dato og tid som UTC
          example: 2021-12-03T14:10:00Z
        vedleggsListe:
          type: array
          description: Liste av dokumenter (hoveddokument og vedlegg) til søknad
          items:
            $ref: "#/components/schemas/VedleggDto"
        visningsSteg:
          $ref: "#/components/schemas/VisningsSteg"
        visningsType:
          $ref: "#/components/schemas/VisningsType"
        kanLasteOppAnnet:
          $ref: "#/components/schemas/KanLasteOppAnnet"
        innsendingsFristDato:
          type: string
          format: date-time
          description: Frist for innsending av søknad / ettersendingssøknad. Dato og tid som UTC
          example: 2021-12-03T15:10:00Z
        forsteInnsendingsDato:
          type: string
          format: date-time
          description: Tidspunkt for innsending av første søknad, kun relevant for ettersendinger. Dato og tid som UTC
          example: 2021-12-03T15:10:00Z
        fristForEttersendelse:
          $ref: "#/components/schemas/FristForEttersendelse"
        arkiveringsStatus:
          $ref: "#/components/schemas/ArkiveringsStatusDto"
        erSystemGenerert:
          type: boolean
          description: >
            Markerer hvis det er systemet (ikke brukeren selv) som har tatt initiativ til å lage søknaden.
            Når en bruker tar initiativ til å opprette en søknad/ettersending lages det et *utkast*.
            Når systemet ser at det mangler påkrevde vedlegg som skal ettersendes, lages det en *oppgave* i stedet.
          example: true
          default: false
        erNavInitiert:
          type: boolean
          description: >
            Hvis true markerer dette at det er NAV (ikke brukeren selv) som har tatt initiativ til å lage søknaden/ettersendingssøknaden.
            Dette innebærer at varsel til bruker skal sendes umiddelbart.
          example: true
          default: false
        soknadstype:
          $ref: "#/components/schemas/SoknadType"
        skjemaPath:
          $ref: "#/components/schemas/SkjemaPath"
        applikasjon:
          $ref: "#/components/schemas/Applikasjon"
        skalSlettesDato:
          $ref: "#/components/schemas/SkalSlettesDato"
        mellomlagringDager:
          $ref: "#/components/schemas/MellomlagringDager"


    EksternEttersendingsOppgave:
      type: object
      description: Data for å opprette en oppgave for ettersending av dokumentasjon
      required:
        - brukerId
        - skjemanr
        - sprak
        - tema
        - vedleggsListe
      properties:
        brukerId:
          $ref:  "#/components/schemas/BrukerId"
        tittel:
          $ref: "#/components/schemas/Tittel"
        skjemanr:
          $ref: "#/components/schemas/Skjemanr"
        sprak:
          $ref: "#/components/schemas/Spraak"
        tema:
          $ref: "#/components/schemas/Tema"
        brukernotifikasjonstype:
          $ref: "#/components/schemas/BrukernotifikasjonsType"
        koblesTilEksisterendeSoknad:
          type: boolean
          description: "Angir om ettersendingen skal kobles til en eksisterende søknad. Hvis denne er satt til true vil filer som tidligere er lastet opp vises i send-inn. Default: false"
          example: false
        vedleggsListe:
          type: array
          description: Liste av vedlegg som kan lastes opp
          items:
            $ref: "#/components/schemas/InnsendtVedleggDto"
          example:
            - vedleggsnr: W1
              tittel: "Dokumentasjon på mottatt bidrag"


    EksternOpprettEttersending:
      type: object
      description: Data for å opprette en ettersending
      required:
        - skjemanr
        - sprak
        - tema
        - vedleggsListe
      properties:
        tittel:
          $ref: "#/components/schemas/Tittel"
        skjemanr:
          $ref: "#/components/schemas/Skjemanr"
        sprak:
          $ref: "#/components/schemas/Spraak"
        tema:
          $ref: "#/components/schemas/Tema"
        brukernotifikasjonstype:
          $ref: "#/components/schemas/BrukernotifikasjonsType"
        koblesTilEksisterendeSoknad:
          type: boolean
          description: "Angir om ettersendingen skal kobles til en eksisterende søknad. Hvis denne er satt til true vil filer som tidligere er lastet opp vises i send-inn. Default: false"
          example: false
        vedleggsListe:
          type: array
          description: Liste av vedlegg som kan lastes opp
          items:
            $ref: "#/components/schemas/InnsendtVedleggDto"
          example:
            - vedleggsnr: W1
              tittel: "Dokumentasjon på mottatt bidrag"

    OpprettLospost:
      type: object
      description: Data for å opprette en løspost
      required:
        - soknadTittel
        - tema
        - dokumentTittel
        - sprak
      properties:
        soknadTittel:
          $ref: "#/components/schemas/Tittel"
        tema:
          $ref: "#/components/schemas/Tema"
        dokumentTittel:
          $ref: "#/components/schemas/Tittel"
        sprak:
          $ref: "#/components/schemas/Spraak"

    FilDto:
      type: object
      description: Data om en opplastet fil
      required:
        - vedleggsid

      properties:
        id:
          type: integer
          format: int64
          description: Identifikasjon av filen i databasen
          example: 12345
        vedleggsid:
          type: integer
          format: int64
          description: Identifikasjon av vedlegget som filen hører til
          example: 1234
        filnavn:
          type: string
          nullable: true
          description: Opplastet filnavn
          example: mitt-sertifikat.png
        mimetype:
          $ref: "#/components/schemas/Mimetype"
        storrelse:
          type: integer
          description: Størrelsen på filen
          example: 12345678
        antallsider:
           type: integer
           description: Antall sider. Dette er aktuelt for PDF filerer
           example: 10
        data:
          $ref: "#/components/schemas/Document"
        opprettetdato:
          type: string
          format: date-time
          description: Opprettet tidspunkt i UTC format
          example: 2022-04-01T15:10:00Z

    EndretDato:
      type: string
      format: date-time
      description: Endret dato og tid som UTC
      example: 2021-12-03T14:10:00Z

    Ettersending:
      type: boolean
      description: Satt til 'true' dersom dette er en ettersendingssøknad.
      example: true

    FormioId:
      type: string
      description: Unik vedleggsId som tilsvarer en gitt komponent i formio. Den legges på vedlegget når det opprettes fra FyllUt. Den legges ikke på når det lages N6 vedlegg fra sendInn. Hoveddokument har heller ikke formioId siden det ikke tilsvarer en gitt komponent i formio.
      example: ec9k3bt

    FristForEttersendelse:
      type: integer
      format: int64
      description: Frist i antall dager etter innsending av søknad for ettersending av vedlegg
      example: 14

    InnsendingsId:
      type: string
      description: Unik søknadsid.
      example: 92ee15dd-dc49-4c95-b9b6-6224bae088bb

    InnsendtDato:
      type: string
      format: date-time
      description: Dato og tid på UTC
      example: 2021-12-03T14:10:00Z

    InnsendtVedleggDto:
      type: object
      description: Data om et dokument på en søknad.
      required:
        - vedleggsnr
      properties:
        vedleggsnr:
          $ref: "#/components/schemas/Vedleggsnr"
        tittel:
          $ref: "#/components/schemas/Tittel"
        url:
          $ref: "#/components/schemas/Vedleggsurl"
        opplastingsValgKommentarLedetekst:
          $ref: "#/components/schemas/OpplastingsvalgKommentarLedetekst"
        opplastingsValgKommentar:
          $ref: "#/components/schemas/OpplastingsvalgKommentar"

    KanLasteOppAnnet:
      type: boolean
      description: Angir om det skal være mulig å opprette og laste opp filer på vedlegg av type Annet (N6) på søknaden.

    KvitteringsDto:
      type: object
      description: Kvittering til søker etter vellykket innsending av søknad
      required:
        - innsendingsId
        - label
        - mottattdato

      properties:
        innsendingsId:
          $ref: "#/components/schemas/InnsendingsId"
        label:
          $ref: "#/components/schemas/Label"
        hoveddokumentRef:
          type: string
          description: sub sti til midlertidig lagret fil
          example: /frontend/v1/soknad/92ee15dd-dc49-4c95-b9b6-6224bae088bb/vedlegg/1234/fil/12345
        innsendteVedlegg:
          type: array
          description: Liste av ingen, en eller flere vedlegg som er sendt inn.
          items:
            $ref: "#/components/schemas/InnsendtVedleggDto"
        skalEttersendes:
          type: array
          description: Liste av obligatoriske av ingen, en eller flere vedlegg som søker må ettersende før søknaden kan behandles.
          items:
            $ref: "#/components/schemas/InnsendtVedleggDto"
        skalSendesAvAndre:
          type: array
          description: Liste av obligatoriske av ingen, en eller flere vedlegg som søker har sagt skal bli sendt inn av andre.
          items:
            $ref: "#/components/schemas/InnsendtVedleggDto"
        levertTidligere:
          type: array
          description: Liste av obligatoriske av ingen, en eller flere vedlegg som er sendt inn tidligere, enten i sammenheng med denne søknadens innsendinger eller som søker har sagt skal har blitt sendt tidligere.
          items:
            $ref: "#/components/schemas/InnsendtVedleggDto"
        sendesIkkeInn:
          type: array
          description: Liste av obligatoriske av ingen, en eller flere vedlegg som søker har sagt ikke vil bli sendt inn enten fordi allerede innsendt eller mangler dokumentasjon.
          items:
            $ref: "#/components/schemas/InnsendtVedleggDto"

        navKanInnhente:
          type: array
          description: Liste av obligatoriske av ingen, en eller flere vedlegg som søker har gitt NAV tillatelse til å innehente.
          items:
            $ref: "#/components/schemas/InnsendtVedleggDto"

        mottattdato:
          type: string
          format: date-time
          description: Tidspunkt  i UTC format søknaden er blitt sendt inn til NAV for behandling
          example: 2022-04-01T15:10:00Z
        ettersendingsfrist:
          type: string
          format: date-time
          description: Tidspunkt  i UTC format for å ettersende eventuelle manglende obligatoriske vedlegg
          example: 2022-05-13T15:10:00Z

    Label:
      type: string
      description: Visnings navn for et vedlegg.
      example: Inntektsopplysninger for selvstendig næringsdrivende og frilansere som skal ha foreldrepenger eller svangerskapspenger.

    MellomlagringDager:
      type: integer
      description: Antall dager søknaden skal mellomlagres før den slettes
      example: 30

    Mimetype:
      type: string
      enum: [ "application/pdf", "application/json", "image/png", "image/jpeg", "application/xml" ]
      description: Angivelse av formatet på opplastet vedlegg.
      example: application/pdf or image/jpeg.

    OpplastingsStatusDto:
      type: string
      enum: [ "IkkeValgt", "LastetOpp", "Innsendt", "SendSenere", "SendesAvAndre", "SendesIkke", "LastetOppIkkeRelevantLenger", "LevertDokumentasjonTidligere", "HarIkkeDokumentasjonen", "NavKanHenteDokumentasjon" ]
      description: Status på om et vedlegg til søknad er enda ikke er lastet opp, lastet opp eller innsendt

    OpplastingsvalgKommentar:
      type: string
      default: null
      description: Søkers begrunnelse for opplastingsvalg.
      example: Dokumentasjonen sendes av min fastlege.

    OpplastingsvalgKommentarLedetekst:
      type: string
      default: null
      description: Ledetekst som indikerer hva det er ønsket at søker skal kommentere (på bokmål).
      example: Hvem skal sende inn denne dokumentasjonen.

    OpprettEttersending:
      type: object
      description: Data for å opprette en ettersending
      required:
        - skjemanr
        - sprak
        - tema
      properties:
        tittel:
          $ref: "#/components/schemas/Tittel"
        skjemanr:
          $ref: "#/components/schemas/Skjemanr"
        sprak:
          $ref: "#/components/schemas/Spraak"
        tema:
          $ref: "#/components/schemas/Tema"
        vedleggsListe:
          type: array
          description: Liste av vedlegg som kan lastes opp
          items:
            $ref: "#/components/schemas/InnsendtVedleggDto"

    OpprettEttersendingGittSkjemaNr:
      type: object
      description: Data for å opprette en søknad gitt skjemanummer
      required:
        - skjemanr
        - sprak
      properties:
        skjemanr:
          $ref: "#/components/schemas/Skjemanr"
        sprak:
          $ref: "#/components/schemas/Spraak"
        vedleggsListe:
          type: array
          description: Liste av vedlegg som kan lastes opp
          items:
            $ref: "#/components/schemas/Vedleggsnr"

    OpprettSoknadBody:
      type: object
      description: Data for å opprette soknad basert på skjemanummer.
      required:
        - skjemanr
        - sprak

      properties:
        skjemanr:
          $ref: "#/components/schemas/Skjemanr"
        sprak:
          $ref: "#/components/schemas/Spraak"
        vedleggsListe:
          type: array
          description: Liste av obligatoriske vedlegg som kan lastes opp til søknaden.
          items:
            $ref: "#/components/schemas/Vedleggsnr"

    Pakrevd:
      type: boolean
      description: Satt til true dersom dette vedlegget er påkrevd innsendt for behandling av søknad.
      example: true

    PatchSoknadDto:
      type: object
      description: Data som kan patches på en soknad

      required:
        - visningsSteg

      properties:
        visningsSteg:
          $ref: "#/components/schemas/VisningsSteg"

    PatchVedleggDto:
      type: object
      description: Properties som skal endres på vedlegg. Merk at tittel bare kan endres på vedlegg av type andre

      properties:
        tittel:
          $ref: "#/components/schemas/Tittel"
        opplastingsStatus:
          $ref: "#/components/schemas/OpplastingsStatusDto"
        opplastingsValgKommentarLedetekst:
          $ref: "#/components/schemas/OpplastingsvalgKommentarLedetekst"
        opplastingsValgKommentar:
          $ref: "#/components/schemas/OpplastingsvalgKommentar"

    PostVedleggDto:
      type: object
      description: Properties som skal settes på vedlegg som skal opprettes.

      properties:
        tittel:
          $ref: "#/components/schemas/Tittel"

    PrefillData:
      type: object
      properties:
        sokerIdentifikasjonsnummer:
          type: string
          nullable: true
          description: Søkerens fnr eller dnr
        sokerFornavn:
          type: string
          nullable: true
          description: Søkerens fornavn
          example: Ola
        sokerEtternavn:
          type: string
          nullable: true
          description: Søkerens etternavn
          example: Nordmann
        sokerAdresser:
          $ref: "#/components/schemas/Adresser"
        sokerKjonn:
          type: string
          description: Søkerens kjønn
          example: MANN
        sokerTelefonnummer:
          $ref: "#/components/schemas/Telefonnummer"
        sokerKontonummer:
          type: string
          nullable: true
          description: Søkerens kontonummer
          example: 8361347234732292
        sokerMaalgruppe:
          $ref: "./../../../../external-api/src/main/resources/arena-api.yml#/components/schemas/Maalgruppe"

    PropertyNavn:
      type: string
      description: Nøkkelnavn på property. Brukt på vedlegg av type Annet (skjemanr=N6), for å sjekke om dette er default Annet vedlegg eller ikke
      example: annenDokumentasjon,  tilleggsVedleggForSkjemaXX.

    RestErrorResponseDto:
      type: object
      description: Feilrespons
      properties:
        message:
          type: string
          description: Feilmelding
        timestamp:
          type: string
          format: date-time
        errorCode:
          type: string
          description: Feilkode
      example:
        message: Noe gikk galt, prøv igjen senere
        timestamp: 2023-12-21T09:31:40.549032434
        errorCode: somethingFailedTryLater

    SkjemaDokumentDto:
      type: object
      required:
        - vedleggsnr
        - tittel
        - label
        - pakrevd
      properties:
        vedleggsnr:
          $ref: "#/components/schemas/Vedleggsnr"
        tittel:
          $ref: "#/components/schemas/Tittel"
        label:
          $ref: "#/components/schemas/Label"
        beskrivelse:
          $ref: "#/components/schemas/Beskrivelse"
        mimetype:
          $ref: "#/components/schemas/Mimetype"
        pakrevd:
          $ref: "#/components/schemas/Pakrevd"
        document:
          $ref: "#/components/schemas/Document"
        propertyNavn:
          $ref: "#/components/schemas/PropertyNavn"
        formioId:
          $ref: "#/components/schemas/FormioId"
        vedleggsurl:
          $ref: "#/components/schemas/Vedleggsurl"

    SkjemaDto:
      type: object
      description: Data for å mellomlagre en søknad slik at eventuelle vedlegg kan legges til
      required:
        - brukerId
        - skjemanr
        - tittel
        - tema
        - spraak
        - hoveddokument
        - hoveddokumentVariant

      properties:
        innsendingsId:
          $ref: "#/components/schemas/InnsendingsId"
        brukerId:
          $ref: "#/components/schemas/BrukerId"
        skjemanr:
          $ref: "#/components/schemas/Skjemanr"
        tittel:
          $ref: "#/components/schemas/Tittel"
        tema:
          $ref: "#/components/schemas/Tema"
        spraak:
          $ref: "#/components/schemas/Spraak"
        status:
          $ref: "#/components/schemas/SoknadsStatusDto"
        hoveddokument:
          $ref: "#/components/schemas/SkjemaDokumentDto"
        hoveddokumentVariant:
          $ref: "#/components/schemas/SkjemaDokumentDto"
        vedleggsListe:
          type: array
          description: Liste av obligatoriske og valgfrie vedlegg som kan lastes opp til søknaden.
          items:
            $ref: "#/components/schemas/SkjemaDokumentDto"
        kanLasteOppAnnet:
          $ref: "#/components/schemas/KanLasteOppAnnet"
        fristForEttersendelse:
          $ref: "#/components/schemas/FristForEttersendelse"
        endretDato:
          $ref: "#/components/schemas/EndretDato"
        skalSlettesDato:
          $ref: "#/components/schemas/SkalSlettesDato"
        mellomlagringDager:
          $ref: "#/components/schemas/MellomlagringDager"
        skjemaPath:
          $ref: "#/components/schemas/SkjemaPath"
        visningsType:
          $ref: "#/components/schemas/VisningsType"

    Skjemanr:
      type: string
      description: NAV skjemanummeret for identifisering av søknaden som er opprettet.
      example: NAV 08-21.05

    SkjemaPath:
      type: string
      description: Skjemanr som brukes i url path (små bokstaver uten mellomrom eller spesialtegn)
      example: nav100708

    SkalSlettesDato:
      type: string
      format: date-time
      description: Dato søknaden vil slettes. En skedulert slettejobb kjøres hver kveld.
      example: 2021-12-03T00:00:00Z

    SoknadsStatusDto:
      type: string
      enum: [ "Opprettet", "Utfylt", "Innsendt", "SlettetAvBruker", "AutomatiskSlettet" ]
      description: Spesifikasjon av status på søknaden.
      example:

    SoknadFile:
      type: object
      required:
        - id
        - fileStatus
      properties:
        id:
          type: string
          description: Unique id of the file
          example: 2f9b8d25-1056-4827-8ddd-cedab7fafaaf
        content:
          type: string
          format: byte
          nullable: true
          description: Byte array of the file content
          example: Byte array with file content
        createdAt:
          type: string
          format: date-time
          nullable: true
          description: Creation date and time in UTC
          example: 2021-12-03T14:10:00Z
        fileStatus:
          type: string
          enum: ["ok", "notfound", "deleted"]
          description: current state of the file. Can be `deleted`, `notfound`, `ok`
          example: not-found

    SoknadType:
        type: string
        enum: [ "soknad", "ettersendelse" ]
        description: Hvilke type søknader som er tilgjengelig for henting
        example: ettersendelse

    Spraak:
      type: string
      description: Søkers foretrukne språk. Det er alltid støtte for nb_NO (norsk bokmål). Det er varierende støtte for andre språk på ulike skjema.
      example: nb_NO

    Telefonnummer:
      type: string
      description: Telefonnummer
      example: "+4712345678"

    Tema:
      type: string
      description: Temaet som forsendelsen tilhører.
      example: FOS

    Tittel:
      type: string
      description: NAVs offisielle tittel til søknad eller dokument.
      example: Forsikring mot ansvar for sykepenger i arbeidsgiverperioden for små bedrifter.

    VedleggDto:
      type: object
      description: Data som beskriver vedlegg/dokument til søknaden
      required:
        - tittel
        - label
        - erHoveddokument
        - erVariant
        - erPdfa
        - erPakrevd
        - opplastingsStatus
        - opprettetdato

      properties:
        id:
          type: integer
          format: int64
          description: Id for det mellomlagrede vedlegget
          example: 123456
        vedleggsnr:
          $ref: "#/components/schemas/Vedleggsnr"
        tittel:
          $ref: "#/components/schemas/Tittel"
        label:
          $ref: "#/components/schemas/Label"
        beskrivelse:
          $ref: "#/components/schemas/Beskrivelse"
        uuid:
          type: string
          description: Unik identifikasjon
          example: 2f9b8d25-1056-4827-8ddd-cedab7fafacc
        mimetype:
          $ref: "#/components/schemas/Mimetype"
        document:
          $ref: "#/components/schemas/Document"
        erHoveddokument:
          type: boolean
          description: true dersom vedlegget/dokumentet er søknadens hoveddokument
          example: true
        erVariant:
          type: boolean
          description: true dersom vedlegget/dokumentet er variant at søknadens hoveddokument (på json format)
          example: true
        erPdfa:
          type: boolean
          description: true dersom vedlegget/dokumentet er på PDF/a format
          example: true
        erPakrevd:
          type: boolean
          description: true dersom vedlegget/dokumentet er påkevd for å kunne bli behandlet av saksbehandler.
          example: true
        skjemaurl:
          type: string
          description: Lenke til skjema som kan lastes ned for å fylles ut
          example: https://cdn.sanity.io/files/gx9wf39f/soknadsveiviser-p/c95447be624fb0ea7c27e1ff7518604bb7aacd71.pdf
        opplastingsStatus:
          $ref: "#/components/schemas/OpplastingsStatusDto"
        opprettetdato:
          type: string
          format: date-time
          description: Opprettet dato og tid som UTC
          example: 2021-12-03T14:10:00Z
        innsendtdato:
          type: string
          format: date-time
          description: Endret dato og tid som UTC
          example: 2021-12-03T14:10:00Z
        formioId:
          $ref: "#/components/schemas/FormioId"
        opplastingsValgKommentarLedetekst:
          $ref: "#/components/schemas/OpplastingsvalgKommentarLedetekst"
        opplastingsValgKommentar:
          $ref: "#/components/schemas/OpplastingsvalgKommentar"

    Vedleggsnr:
      type: string
      description: NAVs identifikasjon av dokumenttype enten som Skjemanummer eller vedleggsnummer.
      example: NAV 14-35.01 eller T7

    Vedleggsurl:
      type: string
      description: Noen vedlegg er NAV-skjemaer som brukeren må fylle ut først og laste det opp som vedlegg. Vedleggsurl er en lenke til skjemaet (enten PDF eller til fyllut) som brukeren kan laste ned/fylle ut.
      example: https://cdn.sanity.io/files/gx9wf39f/soknadsveiviser-p/7146ae917cf8423f71edbf37369da5a6b2a23524.pdf

    VisningsSteg:
      type: integer
      format: int64
      default: 0
      description: Angir i hvilket steg i front-end søker står. Settes default til 0 ved oppretting av søknad.

    VisningsType:
      type: string
      enum: [ "fyllUt", "dokumentinnsending", "ettersending", "lospost" ]
      description: Angir visningsmodus gitt opphav til søknaden

    EnvQualifier:
      type: string
      enum: [ "preprodIntern", "preprodAltIntern", "preprodAnsatt", "preprodAltAnsatt", "delingslenke", "local" ]
      description: Angir et ønske om miljø


security: [ ]

externalDocs:
  description: Documentation of the whole archiving system
  url: https://github.com/navikt/archiving-infrastructure/wiki
